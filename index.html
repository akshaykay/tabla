<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>KeyTabla</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="assets/main.css"
    />
  </head>

  <body>
    <div id="root">
      <button data-key="65" class="key">
        <kbd>A</kbd> <span class="sound">Ghe Bend 1</span>
      </button>
      <button data-key="83" class="key">
        <kbd>S</kbd> <span class="sound">Ghe Bend 2</span>
      </button>
      <button data-key="68" class="key">
        <kbd>D</kbd> <span class="sound">Ghe Open 1</span>
      </button>
      <button data-key="70" class="key">
        <kbd>F</kbd> <span class="sound">Ghe Open 2</span>
      </button>
      <button data-key="71" class="key">
        <kbd>G</kbd> <span class="sound">Na</span>
      </button>
      <button data-key="72" class="key">
        <kbd>H</kbd> <span class="sound">Ta</span>
      </button>
      <button data-key="74" class="key">
        <kbd>J</kbd> <span class="sound">Taka</span>
      </button>
      <button data-key="75" class="key">
        <kbd>K</kbd> <span class="sound">Tin</span>
      </button>
    </div>

    <audio data-key="65" src="assets/Ghe-Bend-1.1.wav"></audio>
    <audio data-key="83" src="assets/Ghe-Bend-2.2.wav"></audio>
    <audio data-key="68" src="assets/Ghe-Open-1.1.wav"></audio>
    <audio data-key="70" src="assets/Ghe-Open-9.9.wav"></audio>
    <audio data-key="71" src="assets/Na-8.8.wav"></audio>
    <audio data-key="72" src="assets/Ta-5.30.wav"></audio>
    <audio data-key="74" src="assets/Taka-1.13.wav"></audio>
    <audio data-key="75" src="assets/Tin-1.10.wav"></audio>

    <script type="text/javascript">
      
      function playSound(event) {
        const audio = document.querySelector(
          `audio[data-key="${event.keyCode}"]`
        );
        if (!audio) return;
        audio.currentTime = 0;
        audio.play();

        const button = document.querySelector(
          `button[data-key="${event.keyCode}"]`
        );
        button.classList.add('pressed');
      }

      function removeTransition(event) {
        if (event.propertyName !== 'transform') return;
        this.classList.remove('pressed');
      }

      const allButtons = document.querySelectorAll('button');
      allButtons.forEach(key => key.addEventListener('transitionend', removeTransition));

      window.addEventListener('keydown', playSound) ;
 
    </script>
</html>
